package com.mobisec.fortnitepayload;

import android.util.Log;

import java.lang.reflect.Field;

public class Payload {

    public static void run() {
        Log.i("MOBISEC", "package com.mobisec.fortnitepayload.Payload; run()");

        //https://www.tutorialspoint.com/java/lang/thread_getcontextclassloader.htm
        Thread t = Thread.currentThread();
        ClassLoader classloader = t.getContextClassLoader();
        t.setContextClassLoader(classloader);
//        System.out.println("Class = " + classloader.getClass());
//        System.out.println("Parent = " + classloader.getParent());

        try {
            //https://www.cnblogs.com/ldq2016/p/6834643.htm
            Class<?> clz = classloader.loadClass("com.mobisec.fortnite.MainActivity");
            Field field = clz.getDeclaredField("flag");//https://blog.csdn.net/shenhaiwen/article/details/75305176

            field.setAccessible(true);

            Object value = field.get(clz);
            Log.i("MOBISEC", " : " + value);

        } catch (Exception e) {
            Log.w("MOBISEC","package com.mobisec.fortnitepayload,Payload.java: ");
            Log.w("MOBISEC", Log.getStackTraceString(e));
        }
    }
}
